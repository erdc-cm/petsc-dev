<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>PETSc Exercises</title>
<style>
<!--
.redbackground { background-color: #FF0000 }
-->
</style>
</head>

<body alink="#FF0000">

<p align="center"><font size="6">PETSc Exercises</font></p>
<p>This set of exercises will lead your through many of the concepts and
techniques used in PETSc. To run the actual examples requires you to have PETSc
installed, but we do provide sample output so the exercises may still be
valuable before you install PETSc.</p>
<p><font size="5" color="#FF0000">0 - Setting up your environment</font></p>
<p class="redbackground">NERSC Windows XP Users<br>
<br>
&nbsp;Start Exceed (X-server):<br>
Start Menu -&gt; All Programs -&gt; Internet Tools -&gt; Hummingbird Connectivity V7.1 -&gt; 
Exceed -&gt; Exceed<br>
<br>
Enable X11 Tunneling in your ssh connection:<br>
1) Run the &quot;SSH Secure Shell Client&quot; on your desktop.<br>
2) Enable X11 Tunneling by clicking Profiles -&gt; Tunneling<br>
&nbsp;&nbsp;&nbsp; Check the box: &quot;Tunnel X11 Connections&quot;<br>
3) Click &quot;OK&quot;<br>
<br>
Quick Connect to seaborg.nersc.gov</p>
<p>PETSc uses two environmental variables to determine where its libraries and
include files are.&nbsp;</p>
<blockquote>
  <p>PETSC_DIR indicates the directory where PETSc is installed. For example /usr/local/petsc-2.1.5<br>
  PETSC_ARCH indicates the architecture PETSc is installed for. For example
  linux</p>
</blockquote>
<p>In csh or tcsh you can set these with, for example,</p>
<blockquote>
  <p>setenv PETSC_DIR /usr/local/petsc-2.1.5<br>
  setenv PETSC_ARCH linux</p>
</blockquote>
<p>In sh or bash you can set them with</p>
<blockquote>
  <p>PETSC_DIR=/usr/local/petsc-2.1.5; export PETSC_DIR<br>
  PETSC_ARCH=linux; export PETSC_ARCH</p>
  <p class="redbackground">NERSC Users - To initialize these variables use the
  commands&nbsp;<br>
  <br>
  module load petsc/2.1.3<br>
  alias mpirun mpirun.poe</p>
</blockquote>
<p><font size="5" color="#FF0000">1- compiling a PETSc program</font></p>
<p>PETSc provides a completely portable make system that works with all
compilers on all systems, Unix, Linux, and Microsoft Windows. We highly
recommend using this system by copying a PETSc makefile and editing as needed
for your application. To compile a PETSc example simply type <br>
&nbsp;&nbsp; <b>make BOPT=[g or O or g_c++ or O_c++] exXX <br>
</b>For example,<b> <br>
&nbsp;&nbsp; make BOPT=g&nbsp; ex1</b></p>
<p><a href="compiling/index.html">Try compiling a PETSc example</a></p>
<p><font size="5" color="#FF0000">2 - running a PETSc program with simple output
to the screen</font></p>
<p>PETSc programs are simply MPI programs. As with all MPI programs, calls to
printf() are not well defined. If different processors call printf() the output
can be jumbled, or even completely lost. PETSc provides several routines to
allow one to print from their program in a rational way.&nbsp;</p>
<p><a href="simpleoutput">Rational output from a PETSc program</a></p>
<p><font size="5" color="#FF0000">3 - Vectors</font></p>
<p>PETSc uses vectors to store PDE solutions, field variables, right hand sides
of linear systems, etc. In classic numerical computing these are store in simple
arrays&nbsp;</p>
<p><font size="5" color="#FF0000">&nbsp;</font><a href="vectors">Introduction to
vectors</a></p>
<p><font size="5" color="#FF0000">&nbsp;&nbsp; A - using VecSetValues()</font></p>
<p><font size="5" color="#FF0000">&nbsp;&nbsp;&nbsp; B - accessing the array
directly</font></p>
<p><font size="5" color="#FF0000">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; I -
C/C++</font></p>
<p><font size="5" color="#FF0000">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; II - F77</font></p>
<p><font size="5" color="#FF0000">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; II - F90</font></p>
<p><font size="5" color="#FF0000">4 - parallel data layout</font></p>
<p><font size="5" color="#FF0000">&nbsp;&nbsp;&nbsp; A - for structured grids
using DA</font></p>
<p>Objective:  To demonstrate use of distributed arrays (DA) to<br>
                manage a parallel structured mesh computation.<br>
   Program: ${PETSC_DIR}<a href="http://www-unix.mcs.anl.gov/petsc/petsc-current/src/snes/examples/tutorials/ex5.c">/src/snes/examples/tutorials/ex5.c</a><br>
   Runtime command:&nbsp;<br>
     % mpirun -np 4 ex5 -da_view_draw -snes_monitor -draw_pause -1<br>
      where<br>
         -da_view_draw : draw DA configuration</p>
<p><font size="5" color="#FF0000">&nbsp;&nbsp;&nbsp; B - for unstructured grids</font></p>
<p> Objective:  To demonstrate use of vector scatters (VecScatter)&nbsp;<br>
               to manage a parallel unstructured mesh computation.<br>
   Program: ${PETSC_DIR}<a href="http://www-unix.mcs.anl.gov/petsc/petsc-current/src/snes/examples/tutorials/ex10/ex10.c">/src/snes/examples/tutorials/ex10d/ex10.c</a> and
<a href="http://www-unix.mcs.anl.gov/petsc/petsc-current/src/snes/examples/tutorials/ex10/adj.in"> adj.in</a><br>
   Runtime command:&nbsp;<br>
     % mpirun -np 2 ex10 -snes_monitor<br>
</p>
<p><font size="5" color="#FF0000">5 - parallel matrix assembly</font></p>
<p align="left">PETSc provides a large number of sparse matrix formats and
allows one to easily generate matrices without worrying about the details&nbsp;</p>
<p>&nbsp;<a href="matrices">Sample usage</a></p>
<p><font size="5" color="#FF0000">6 - linear solves</font></p>
<p>SLES provides an easy-to-use interface to the combination of a<br>
Krylov subspace iterative solver (KSP) and a preconditioner (PC).<br>
<br>
<a href="sles">Sample usage</a></p>
<p><font size="5" color="#FF0000">7 - nonlinear solves</font></p>
<p>SNES provides an easy-to-use interface to Newton-based methods for<br>
solving systems of nonlinear equations.&nbsp;</p>
<p><a href="snes">Sample usage</a></p>
<p><a href="snes/advanced.html">Advanced options</a></p>
<p><font size="5" color="#FF0000">9 - time integration</font></p>
<p>The time-stepping (TS) provides simple ODE integrators and
pseudo-time-stepping routines for difficult to solve nonlinear problems.</p>
<p><a href="odes">Sample usage of the ODE integrators</a></p>
<p><a href="pseudo">Sample usage of the pseudo-time-stepping</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><font color="#FF0000">&nbsp;</font></p>

</body>

</html>