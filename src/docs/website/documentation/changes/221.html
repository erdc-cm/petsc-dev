<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
  <meta name="GENERATOR" content="Microsoft FrontPage 5.0">
  <title>PETSc: Docs:&nbsp; Changes: 2.2.1</title>
</head>
<body bgcolor="#d5eaff">
<table width="100%">
  <tbody>
    <tr>
      <td width="25%" valign="top">
      <h1><font color="#ff0000" size="7">PETSc</font></h1>
      <ul>
        <li><a href="../../index.html"><strong>Home</strong></a></li>
      </ul>
      </td>
      <td width="75%"><!--##begin-->
      <h1> Docs:&nbsp;Changes: 2.2.1</h1>
<!--##end--> </td>
    </tr>
    <tr>
      <td width="100%" colspan="2">
      <hr size="4" color="#FF5B5B"> </td>
    </tr>
    <tr>
      <td width="25%" valign="top">
      <ul>
        <li><a href="../../download/index.html"><strong>Download</strong></a></li>
        <li><a href="../../features/index.html"><strong>Features</strong></a></li>
        <li><a href="../index.html"><strong>Documentation</strong></a>
          <ul>
            <li><a href="../index.html#Manual"><strong>Manual pages and
Users Manual</strong></a></li>
            <li><a href="../referencing.html"><strong>Referencing&nbsp;
PETSc</strong></a></li>
            <li><a href="../tutorials/index.html"><strong>Tutorials</strong></a></li>
            <li><strong><a href="../installation.html">Installation</a> </strong></li>
            <li><strong><a href="index.html">Changes</a></strong>
              <ul>
                <li><font color="#ff0000">2.2.1</font></li>
                <li><a href="220.html">2.2.0</a></li>
                <li><a href="216.html">2.1.6</a></li>
                <li><a href="215.html">2.1.5</a></li>
                <li><a href="213.html">2.1.3</a></li>
                <li><a href="212.html">2.1.2</a></li>
                <li><a href="211.html">2.1.1</a></li>
                <li><a href="21.html">2.1.0</a></li>
                <li><a href="2029.html">2.0.29</a></li>
                <li><a href="2028.html">2.0.28</a></li>
                <li><a href="2024.html">2.0.24</a></li>
                <li><a href="2022.html">2.0.22</a></li>
                <li><a href="2918-21.html">2.0.21</a></li>
                <li><a href="2918-21.html">2.0.18-20</a></li>
                <li><a href="2017.html">2.0.17</a></li>
                <li><a href="2016.html">2.0.16</a></li>
                <li><a href="2015.html">2.0.15</a></li>
              </ul>
            </li>
            <li><strong><a href="../troubleshooting.html">Troubleshooting</a></strong></li>
            <li><strong><a href="../bugreporting.html">Bug Reporting</a></strong></li>
            <li><strong><a href="../codemanagement.html">Code Management</a></strong></li>
            <li><strong><a href="../faq.html">FAQ</a> </strong></li>
            <li><strong><a href="../copyright.html">Copyright</a></strong> </li>
          </ul>
        </li>
        <li><a href="../../publications/index.html"><strong>Publications</strong></a></li>
        <li><a href="../../miscellaneous/index.html"><strong>Miscellaneous</strong></a></li>
        <li><a href="../miscellaneous/external.html"><strong>External Software</strong></a></li>
        <li><a href="../developers/index.html"><strong>Developers Site</strong></a></li>
      </ul>
      </td>
      <td width="75%" valign="top"><!--##begin-->
      <p align="center"><font color="#ff0000" size="5"><a name="CHANGES">CHANGES</a>
in PETSc 2.2.1 </font></p>
      <p><font size="4"><strong><u>General:<br></u></strong></font></p>
        <ul> <li> Introduced 4 new PETSc data types: PetscInt, PetscErrorCode, PetscMPIInt and PetscBLASInt. For 99% of users 
            these are just int or integer*4 and you do <strong>not </strong> need to change your code. </li>
          <li>For users with more than roughly 2 billion unknowns you can run configure with --with-64-bit-ints and 
              then PetscInt will represent 64 bit integers, long long int in C and integer*8 in Fortran. But the 
              the other 3 types remain 32 bit (i.e. int in C and integer*4 in Fortran). Now you can index into vectors and
              matrices with virtually unlimited sizes.
          </ul>

      <ul>  

      <p><u><b>Vec:</b></u><br>
        <ul> <li> VecSetStashInitialSize() -> VecStashSetInitialSize()</li>
        <li>VecConvertMPIToAll() and VecConvertMPIToZero() have been replaced with
            VecScatterCreateToAll() and VecScatterCreateToZero()</li></ul>
      </p>
      <p><u><b>IS:</b></u><br>
        <ul> <li> ISSum() now has a throughput argument instead of
            one in and one output. </li>
        </ul>
      </p>
      <p><u><b>Mat:</b></u></p>
        <ul> <li> MatSetStashInitialSize() -> MatStashSetInitialSize()</li>
        <li>added MatFactorInfoInitialize()</li>
        <li>added MatStashGetInfo()</li>
        <li>added MatGetVecs()</li>
        <li>added MatIsSymmetric(), MatIsTranspose() now take a tolerance flag for equality (use 0.0 for identical)</li>
        <li>added MatMPIAIJSetPreallocationCSR() and MatMPIBAIJSetPreallocationCSR()</li>
        </ul>

      <p><u><b>PC:</b></u>
        <ul> <li> ICC now uses Manteuffel shift by default</li>
        <li> If matrix is symmetric, PC defaults to ICC when possible, if you told with MatSetOption(mat,MAT_SYMMETRIC)</li>
        <li> PCSetVector() is gone (no longer needed) </li>
        <li> PCNullSpaceAttach() is gone, use KSPSetNullSpace() </li>
        <li>MatGetSubmatrices() now preserves symmetric flag of original matrix</li>
        <li> hypre BoomerAMG (-pc_type hypre -pc_hypre_type boomeramg) now uses one 1 cycle of multigrid as preconditioner
             (Previously it used either a decrease in residual of 10^-7 or a maximum of 20 iterations</li>
       </ul>


      </b></u></p>
      <p><u><b>KSP:</b></u></p>
        <ul><li>Note that a relative residual tolerance now means that ||r_k|| &lt; tol*||b||</li> <li> Removed KSPSetRhs() and KSPSetSolution(), pass them through KSPSolve() instead</li>
        <li> Added KSPSetNullSpace(), KSPGetNullSpace() </li></ul>
      <p><u><b>DA:</b></u></p>

  <ul><li>Added DAGetGhostedCoordinates() and DAGetCoordinateDA() (see src/dm/da/examples/tutorials/ex3.c)</li>
  <li>Added DACoor2d and DACoor3d (see src/dm/da/examples/tutorials/ex3.c)</li>
  <li>DAGetInterpolation() now provides the correct interpolation for nonuniform grids using the coordinate information 
          provided with DASetCoordinates(). (see src/dm/da/examples/tutorials/ex3.c)</li>
   </ul>

      <p><u><b>config/configure.py:</b></u></p>
 
      <ul>
          <li>--with-c/f-blas-lapack -> --download-c/f-blas-lapack=yes</li>
          <li>--with-c/f-blas-lapack-if-needed -> --download-c/f-blas-lapack=ifneeded</li>
          <li>added --download-mpich=yes,no,ifneeded</li>
          <li>added --download-mpich-device=</li>
          <li>added --download-mpich-machines=[machines]</li>
          <li>added configure including download support for hypre, parmetis</li>
          <li>added configure support (without download) to Mumps, UMF, Superlu,SuperLU_dist,DSCPACK</li>
          <li>Made configure much more robust</li>
      </ul>

      <p><u><b>SNES:</b></u></p>

  <ul><li>Added -snes_converged_reason</li>
      <li>Added SNESSetRhs(snes,rhs) to allow for solving F(x) = rhs </li></ul>

      <p> <u><b>TS:<br>
      </b></u></p>
      <ul>
      </ul>
      <p><span style="font-weight: bold; text-decoration: underline;">DMMG:</span><br></p>
        <ul><li>Added DMMGSetNullSpace()</li></ul>

      <p><span style="font-weight: bold; text-decoration: underline;">SYS:</span></p>
  
    <p><span style="font-weight: bold; text-decoration: underline;">Fortran:</span><br></p>
      <p><br><span style="font-weight: bold; text-decoration: underline;">ExternalPackages:</span><br></p>
      </ul>
      </td>
    </tr>
    <tr>
      <td width="100%" colspan="2">
      <hr size="4" color="#FF5B5B"> </td>
    </tr>
  </tbody>
</table>
</body>
</html>
