#!/bin/sh
#set -x

#
# This program is a wrapper which enables using mpiexec with valgrind
#

if [ $1 !=  "-n" ]; then
echo "Error in  mpiexec command: must start with -n <numberprocessors>"
exit 1
fi
shift
np=$1
shift
progname=$1
shift
options=$*
${PETSC_DIR}/bin/petscmpiexec -n $np valgrind -q --tool=memcheck --dsymutil=yes --num-callers=20 $progname $options

